{{ define "header" }}
  {{ $featured_image := .Params.featured_image | default .Site.Params.featured_image }}
  {{ if $featured_image }}
    {{/* Trimming the slash and adding absURL make sure the image works no matter where our site lives */}}
    {{ $featured_image := (trim $featured_image "/") | absURL }}
    <header class="cover bg-top" style="background-image: url('{{ $featured_image }}');">
      <div class="bg-black-60">
        {{ partial "site-navigation-home.html" . }}
        <div class="tc-l pv6 ph3 ph4-ns">
          <h1 class="arabic-text f2 f-subheadline-l fw2 white-90 mb0 lh-title">
            {{ .Title }}
          </h1>
          {{ with .Params.description }}
            <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
              {{ . }}
            </h2>
          {{ end }}
        </div>
      </div>
    </header>
  {{ else }}
    <header class="cover bg-top" style="background-color: #333;">
      <div class="bg-black-60">
        {{ partial "site-navigation-home.html" . }}
        <div class="tc-l pv6 ph3 ph4-ns">
          <h1 class="arabic-text f2 f-subheadline-l fw2 white-90 mb0 lh-title">
            {{ .Title }}
          </h1>
          {{ with .Params.description }}
            <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
              {{ . }}
            </h2>
          {{ end }}
        </div>
      </div>
    </header>
  {{ end }}
{{ end }}

{{ define "main" }}
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw8">
      <div class="nested-copy-line-height lh-copy arabic-text f4 nested-links {{ $.Param "text_color" | default "mid-gray" }}">
        {{- .Content -}}
      </div>
      
      <div class="mb5 mt5">
        {{ partial "tags-cloud.html" . }}
      </div>
      
      <div class="intro-link-container arabic-text mb4 mt5 tc">
        <div class="flex flex-wrap justify-center">
          <a href="/مؤلفات/" class="intro-link f3 pa3 br3 dib mb2 mr2">
            <span class="intro-icon mr2">📚</span>
            المؤلفات
          </a>
          <a href="/fatawa/" class="intro-link f3 pa3 br3 dib mb2 mh2">
            <span class="intro-icon mr2">⚖️</span>
            الفتاوى
          </a>
          <a href="/الصوتيات/" class="intro-link f3 pa3 br3 dib mb2 ml2">
            <span class="intro-icon mr2">🔊</span>
            الصوتيات
          </a>
        </div>
        <div class="flex justify-center w-100 mt4">
          <a href="/الافتتاحية/" class="sheikh-message arabic-text f4 fw5 link black hover-primary dib tc">
            <span class="intro-icon mr2">✍️</span>
            كلمة الشيخ
          </a>
        </div>
        <div class="flex justify-center w-100 mt2">
          <a href="/الترجمة/" class="sheikh-message arabic-text f4 fw5 link black hover-primary dib tc">
            <span class="intro-icon mr2">👨‍🏫</span>
            الترجمة
          </a>
        </div>
      </div>

      <div class="widgets-container flex flex-wrap justify-between mt5">
        <!-- Elfsight Twitter Feed -->
        <div class="widget-column w-100 w-50-l pr3-l">
          <script src="https://static.elfsight.com/platform/platform.js" async></script>
          <div class="elfsight-app-40cb07b9-21e1-44cb-880e-4c2c8f22be13" data-elfsight-app-lazy></div>
        </div>

        <!-- Latest YouTube Videos -->
        <div class="widget-column w-100 w-50-l pl3-l youtube-widget-container">
          <!-- Elfsight YouTube Gallery | Untitled YouTube Gallery -->
          <script src="https://static.elfsight.com/platform/platform.js" async></script>
          <div class="elfsight-app-58c02331-cb89-4b88-93ed-e7bbb8553fa3" data-elfsight-app-lazy></div>
        </div>
      </div>
    </article>
  </div>

  <style>
    .intro-link-container {
      text-align: center;
      padding: 2rem 0;
    }
    .youtube-widget-container {
      height: 700px;
      overflow: hidden;
    }
    .youtube-widget-container .elfsight-app-58c02331-cb89-4b88-93ed-e7bbb8553fa3 {
      height: 100%;
    }
    .intro-link {
      display: inline-block;
      background-color: #f8f8f8;
      color: #333;
      text-decoration: none;
      border: 2px solid #ddd;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    .intro-link:hover {
      background-color: #333;
      color: white;
      border-color: #333;
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .intro-icon {
      display: inline-block;
      font-size: 1.2em;
    }
    .sheikh-message:hover {
      text-decoration: underline;
    }
    /* Increase content width */
    .nested-copy-line-height {
      max-width: 100%;
      line-height: 1.7;
    }
    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      .intro-link {
        background-color: #2a2a2a;
        color: #f0f0f0;
        border-color: #555;
      }
      .intro-link:hover {
        background-color: #444;
        border-color: #777;
      }
      .sheikh-message {
        color: #f0f0f0;
      }
    }
  </style>
{{ end }} 