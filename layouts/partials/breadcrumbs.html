{{/*
  Breadcrumb navigation
  Shows hierarchy: Home › Section › Page
  If language direction is RTL, we keep logical ordering but rely on CSS direction.
*/}}
<nav class="breadcrumbs pv2 ph3 arabic-text f6 mid-gray" aria-label="breadcrumb">
  {{/* Home */}}
  <span class="breadcrumb-item">
    <a href="{{ "/" | relLangURL }}" class="link mid-gray hover-dark-gray no-underline">{{ $.Site.Params.homeLabel | default "الرئيسية" }}</a>
  </span>

  {{ $section := .Section }}
  {{ if and $section (ne .Kind "term") }}
    {{ $sectionPage := .Site.GetPage "section" $section }}
    {{ if $sectionPage }}
      <span class="ph1 silver">›</span>
      <span class="breadcrumb-item">
        <a href="{{ $sectionPage.RelPermalink }}" class="link mid-gray hover-dark-gray no-underline">{{ $sectionPage.Title }}</a>
      </span>
    {{ end }}
  {{ end }}

  {{/* Show current section breadcrumb if it exists and is not the page itself */}}
  {{ $sec := .CurrentSection }}
  {{ if and $sec (ne $sec .) }}
    <span class="ph1 silver">›</span>
    <span class="breadcrumb-item">
      <a href="{{ $sec.RelPermalink }}" class="link mid-gray hover-dark-gray no-underline">{{ $sec.Title }}</a>
    </span>
  {{ end }}

  {{/* Show direct parent breadcrumb if it exists and is different from section */}}
  {{ $par := .Parent }}
  {{ if and $par (ne $par $sec) }}
    <span class="ph1 silver">›</span>
    <span class="breadcrumb-item">
      <a href="{{ $par.RelPermalink }}" class="link mid-gray hover-dark-gray no-underline">{{ $par.Title }}</a>
    </span>
  {{ end }}

  {{ if .IsPage }}
    <span class="ph1 silver">›</span>
    <span class="breadcrumb-current dark-gray">{{ .Title }}</span>
  {{ else if eq .Kind "term" }}
    {{/* Taxonomy term page, e.g., /categories/<term>. We want Home › فتاوى › Term */}}
    {{ $fatawaPage := .Site.GetPage "page" "fatawa" }}
    {{ if $fatawaPage }}
      <span class="ph1 silver">›</span>
      <span class="breadcrumb-item">
        <a href="{{ $fatawaPage.RelPermalink }}" class="link mid-gray hover-dark-gray no-underline">{{ $fatawaPage.Title }}</a>
      </span>
    {{ end }}
    <span class="ph1 silver">›</span>
    <span class="breadcrumb-current dark-gray">{{ .Title }}</span>
  {{ end }}
</nav> 